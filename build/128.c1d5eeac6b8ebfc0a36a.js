"use strict";(self.webpackChunkproduction_project=self.webpackChunkproduction_project||[]).push([[128],{9088:(e,a,t)=>{t.r(a),t.d(a,{default:()=>Q});var i=t(7624),s=t(7936),r=t(5520),n=t(1504),c=t(8760),l=t(100);const o={comment:"zo5NFi5H"};var d=t(6944),m=t(9156),u=t(2748),g=t(5768);const h="ghhhlnG6",x="dsH_3Oqu",j="Ks7Kyp_K",v="dw82WMzO";var f=(0,n.memo)((function(e){var a=e.className,t=e.comment;return e.isLoading?(0,i.jsxs)("div",{className:(0,r.g)(h,[a,"V0iZ1Un3"],{}),children:[(0,i.jsxs)("div",{className:x,children:[(0,i.jsx)(g.W,{width:30,height:30,border:"50%"}),(0,i.jsx)(g.W,{height:16,width:100,className:v})]}),(0,i.jsx)(g.W,{className:j,width:"100%",height:50})]}):t?(0,i.jsxs)("div",{className:(0,r.g)(h,[a],{}),children:[(0,i.jsxs)(m.q,{to:"".concat(d.oF.profile).concat(null==t?void 0:t.user.id),className:x,children:[null!=t&&t.user.avatar?(0,i.jsx)(u.C,{size:30,src:null==t?void 0:t.user.avatar}):null,(0,i.jsx)(c.a,{className:v,title:null==t?void 0:t.user.username})]}),(0,i.jsx)(c.a,{className:j,text:null==t?void 0:t.text})]}):null})),p=(0,n.memo)((function(e){var a=e.className,t=e.isLoading,s=e.comments,n=(0,l.Gy)("article").t;return t?(0,i.jsxs)("div",{className:(0,r.g)(o.commentList,[a],{}),children:[(0,i.jsx)(f,{isLoading:!0,comment:void 0}),(0,i.jsx)(f,{isLoading:!0,comment:void 0}),(0,i.jsx)(f,{isLoading:!0,comment:void 0})]}):(0,i.jsx)("div",{className:(0,r.g)(o.commentList,[a],{}),children:null!=s&&s.length?s.map((function(e){return(0,i.jsx)(f,{isLoading:t,className:o.comment,comment:e},e.id)})):(0,i.jsx)(c.a,{text:n("No comments yet")})})})),w=(0,n.lazy)((function(){return t.e(384).then(t.bind(t,1384))})),N=t(624),L=t(3284),C=t(3720),y=t(7256),I=t(3152);const S=e=>e.articleDetailsPage?.comments?.isLoading,b=e=>e.articleDetailsPage?.recommendations?.isLoading;var k=t(9664),D=t(6056),A=t(5760);const P=(0,k.aw)("articleDetails/fetchCommentsByArticleId",(async(e,a)=>{const{extra:t,rejectWithValue:i}=a;if(!e)return i("error");try{const a=await t.api.get("/comments",{params:{articleId:e,_expand:"user"}});if(!a.data)throw new Error;return a.data}catch(e){return i("error")}})),W=(0,k.aw)("articleDetails/addCommentForArticle",(async(e,a)=>{const{extra:t,dispatch:i,rejectWithValue:s,getState:r}=a,n=(0,A.Go)(r()),c=(0,D.Mb)(r());if(!n||!e||!c)return s("no data");try{const a=await t.api.post("/comments",{articleId:c.id,userId:n.id,text:e});if(!a.data)throw new Error;return i(P(c.id)),a.data}catch(e){return s("error")}})),_=(0,k.aw)("articleDetailsPage/fetchArticleRecommendations",(async(e,a)=>{const{extra:t,rejectWithValue:i}=a;try{const e=await t.api.get("/articles",{params:{_limit:4,_expand:"user"}});if(!e.data)throw new Error;return e.data}catch(e){return i("error")}}));var z=t(9320);const K=(0,k.cr)({selectId:e=>e.id}),q=K.getSelectors((e=>e.articleDetailsPage?.recommendations||K.getInitialState())),E=(0,k.is)({name:"articleDetailsPageRecommendationsSlice",initialState:K.getInitialState({isLoading:!1,error:void 0,ids:[],entities:{}}),reducers:{},extraReducers:e=>{e.addCase(_.pending,(e=>{e.error=void 0,e.isLoading=!0})).addCase(_.fulfilled,((e,a)=>{e.isLoading=!1,K.setAll(e,a.payload)})).addCase(_.rejected,((e,a)=>{e.isLoading=!1,e.error=a.payload}))}}),{reducer:F}=E,G=(0,k.cr)({selectId:e=>e.id}),M=G.getSelectors((e=>e.articleDetailsPage?.comments||G.getInitialState())),O=(0,k.is)({name:"articleDetailsCommentsSlice",initialState:G.getInitialState({isLoading:!1,error:void 0,ids:[],entities:{}}),reducers:{},extraReducers:e=>{e.addCase(P.pending,(e=>{e.error=void 0,e.isLoading=!0})).addCase(P.fulfilled,((e,a)=>{e.isLoading=!1,G.setAll(e,a.payload)})).addCase(P.rejected,((e,a)=>{e.isLoading=!1,e.error=a.payload}))}}),{reducer:V}=O,R=(0,z.TL)({recommendations:F,comments:V}),T=(0,t(2808).M3)(s.Mb,A.Go,((e,a)=>!(!e||!a)&&e.user.id===a.id));var B=t(8084);const H={articleDetailsPageHeader:"borzsIrg",editBtn:"XdnP3e6a"};var U=(0,n.memo)((function(e){var a=e.className,t=(0,l.Gy)("article").t,c=(0,L.i6)(),o=(0,N.w1)(T),m=(0,N.w1)(s.Mb),u=(0,n.useCallback)((function(){c(d.oF.articles)}),[c]),g=(0,n.useCallback)((function(){m&&m.id&&c("".concat(d.oF.article_details).concat(m.id,"/edit"))}),[m,c]);return(0,i.jsxs)("div",{className:(0,r.g)(H.ArticleDetailsPageHeader,[a],{}),children:[(0,i.jsx)(B.q,{theme:B.qm.OUTLINE,onClick:u,children:t("Back to articles")}),o&&m&&(null==m?void 0:m.id)&&(0,i.jsx)(B.q,{className:H.editBtn,theme:B.qm.OUTLINE,onClick:g,children:t("Edit")})]})}));const X="nza6MO83",Y="l40nXCp9";var Z={articleDetailsPage:R},J=function(e){var a=e.className,t=(0,l.Gy)("article").t,o=(0,L.W4)().id,d=(0,N.OY)(),m=(0,N.w1)(M.selectAll),u=(0,N.w1)(q.selectAll),g=(0,N.w1)(S),h=(0,N.w1)(b),x=(0,n.useCallback)((function(e){d(W(e))}),[d]);return(0,y.w)((function(){o&&(d(P(o)),d(_()))})),o?(0,i.jsx)(C.S,{reducers:Z,removeAfterUnmount:!0,children:(0,i.jsxs)(I.K,{className:(0,r.g)(X,[a],{}),children:[(0,i.jsx)(U,{}),(0,i.jsx)(s.AF,{id:o}),(0,i.jsx)(c.a,{size:c.gV.L,className:Y,title:t("Recommended")}),(0,i.jsx)(s.uw,{articles:u,isLoading:h,className:"KTdTikWK",target:"_blank"}),(0,i.jsx)(c.a,{size:c.gV.L,className:Y,title:t("Comments")}),(0,i.jsx)(w,{onSendComment:x}),(0,i.jsx)(p,{isLoading:g,comments:m})]})}):(0,i.jsx)(I.K,{className:(0,r.g)(X,[a],{}),children:t("Articles not found")})};const Q=(0,n.memo)(J)}}]);